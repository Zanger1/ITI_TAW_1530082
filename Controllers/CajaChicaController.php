<?php class CajaChicaController {	function __construct(){	}	function index(){		$listaCaja=CajaChicaModel::all();		require_once('Views/caja-chica/index.php');	}	function all_json(){		$output = CajaChicaModel::all_json();		echo $output;	}	function register(){		require_once('Views/caja-chica/register.php');	}	function save(){		//$id_sucursal = $_POST["IdSucursal"]; /*'';		 /*				if(isset($_SESSION["id_role"]) && $_SESSION["id_role"] !== '1'){	//NO ES EL ADMIN GENERAL			$id_sucursal = $_SESSION["id_sucursal"];	//EL form se les deshabilita y no envia el POST, entonces recurrir a su SESSION		} else if($_SESSION["id_role"] == '1') {			if(isset($_POST["IdSucursal"])){				$id_sucursal = $_POST["IdSucursal"];	//El admin general si puede decidir que Id de Sucursal mandar en un Request tipo $_POST							} else {				$id_sucursal = $_POST["IdSucursal"];	//El admin general si puede decidir que Id de Sucursal mandar en un Request tipo $_POST											}		} */                //si es un usuario con rol difeente a administrador general        //toma  $id_sucursal  de los datos del usuario logueado		if(isset($_SESSION["id_role"]) && $_SESSION["id_role"] !== '1')		{			$id_sucursal = $_SESSION["id_sucursal"];		}		else		{						//si es administrador general toma $id_sucursal del combobox  			$id_sucursal = $_POST["IdSucursal"];		}			if(isset($_SESSION["id_employe"]) && isset($_SESSION["id_sucursal"]))		{			$caja= new CajaChicaModel(null, $id_sucursal, $_POST['IdTipoMovimiento'], $_POST['Descripcion'], $_POST['Monto'],$_SESSION['id_employe'],$_POST['Fecha'], null);			CajaChicaModel::save($caja);			#$this->show();		}	}	function show(){		$listaCaja=CajaChicaModel::all();		require_once('Views/caja-chica/index.php');	}	function updateshow(){		if(isset($_GET["id"])){			$id=$_GET['id'];			$cc=CajaChicaModel::searchById($id);			//require_once('Views/empleados/updateshow.php');			require_once('Views/caja-chica/modal.php');					}else{		}	}	function total_caja(){		//Me va a retornar cuanto dinero hay en la caja chica de X sucursal dependiendo el ID que mande la URL		if(isset($_GET["IdSucursal"])){			if($_GET["IdSucursal"]>0){				$id=$_GET['IdSucursal'];				$total=SucursalesModel::getTotalEnCajaActual($id);				echo $total;			} else {				$total=SucursalesModel::getTotalEnTodaLasCajas();				echo $total;			}		}	}	function update(){		$id_sucursal = $_POST["IdSucursal"];/* #'';		if(isset($_SESSION["id_role"]) && $_SESSION["id_role"] !== '1'){	//NO ES EL ADMIN GENERAL			$id_sucursal = $_SESSION["id_sucursal"];	//EL form se les deshabilita y no envia el POST, entonces recurrir a su SESSION		} else {			$id_sucursal = $_POST["IdSucursal"];	//El admin general si puede decidir que Id de Sucursal mandar en un Request tipo $_POST		} */		$caja = new CajaChicaModel($_POST['IdCajaChica'], $id_sucursal, $_POST['IdTipoMovimiento'],		$_POST['Descripcion'], $_POST['Monto'], null,null /*,$_POST['IdEmpleado'],$_POST['Fecha']*/  );		CajaChicaModel::update($caja);		#$this->show();		#Los parms que fuero conmentados (sucursal, empleado, fecha) ya no se modifican	}	function delete(){		$id=$_GET['id'];		CajaChicaModel::delete($id);		#$this->show();	}	function error(){		require_once('Views/caja/error.php');	}}?>